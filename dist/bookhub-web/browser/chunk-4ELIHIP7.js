import{i as B}from"./chunk-CA4L5CKF.js";import{A as v,B as _,F as M,H as E,I as c,K as O,L as S,O as w,Q as y,R as F,S as P,T as R,U as k,V as N,W as T,X as I,Z as L,ma as D,na as U,y as G,z as j}from"./chunk-7QRJM3WR.js";import{i as z,j as b,k as x,p as C}from"./chunk-F3GBKEZA.js";import"./chunk-Q64FFBLU.js";import{Gb as h,Sb as o,Wa as m,_b as f,da as d,ha as u,lb as p,pb as g,tb as s,xb as t,yb as e,zb as l}from"./chunk-2LSH2JKS.js";var A=class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=u({type:r,selectors:[["app-layout"]],standalone:!0,features:[f],decls:4,vars:0,consts:[[1,"content-wrapper"]],template:function(i,a){i&1&&(l(0,"app-navbar"),t(1,"div",0),l(2,"router-outlet"),e(),l(3,"app-footer"))},dependencies:[z,G,j],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;justify-content:center;align-items:center;padding:20px}.content-wrapper[_ngcontent-%COMP%]{padding:20px}"]})};function Z(r,n){r&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}function $(r,n){r&1&&(t(0,"mat-error"),o(1,"Introduzca un correo electr\xF3nico v\xE1lido."),e())}function ee(r,n){r&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}var H=class r{loginForm;fb=d(P);authService=d(C);snackBar=d(D);router=d(b);CUSTOMER_ROLE="CUSTOMER";AUTHOR_ROLE="AUTHOR";CUSTOMER_ROUTE="/customer/catalog";AUTHOR_ROUTE="/author/books/list";DEFAULT_ROUTE="/home";constructor(){this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",c.required]})}controlHasError(n,i){return this.loginForm.controls[n].hasError(i)}onSubmit(){if(this.loginForm.invalid)return;let n=this.loginForm.value;this.authService.login(n).subscribe({next:()=>{this.showSnackBar("Inicio de sesi\xF3n exitoso"),this.redirectUserBasedOnRole()},error:()=>{this.showSnackBar("Error en el inicio de sesi\xF3n. Por favor, intenta de nuevo.")}})}redirectUserBasedOnRole(){let n=this.authService.getUserRole();n===this.CUSTOMER_ROLE?this.router.navigate([this.CUSTOMER_ROUTE]):n===this.AUTHOR_ROLE?this.router.navigate([this.AUTHOR_ROUTE]):this.router.navigate([this.DEFAULT_ROUTE])}showSnackBar(n){this.snackBar.open(n,"Cerrar",{duration:3e3})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=u({type:r,selectors:[["app-login"]],standalone:!0,features:[f],decls:29,vars:5,consts:[[1,"login-container"],[1,"login-card"],[1,"login-image"],[1,"image-overlay-text"],[1,"login-form"],[3,"ngSubmit","formGroup"],[1,"form-field"],["matInput","","formControlName","email","type","email","placeholder","Ingrese su correo electr\xF3nico"],["matInput","","formControlName","password","type","password","placeholder","Ingrese su contrase\xF1a"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],["routerLink","/auth/register"]],template:function(i,a){i&1&&(t(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),o(5,"Bienvenido a BookHub"),e(),t(6,"p"),o(7,"Inicia sesi\xF3n para continuar"),e()()(),t(8,"div",4)(9,"h2"),o(10,"Iniciar Sesi\xF3n"),e(),t(11,"form",5),h("ngSubmit",function(){return a.onSubmit()}),t(12,"mat-form-field",6)(13,"mat-label"),o(14,"Correo Electr\xF3nico"),e(),l(15,"input",7),p(16,Z,2,0,"mat-error")(17,$,2,0,"mat-error"),e(),t(18,"mat-form-field",6)(19,"mat-label"),o(20,"Contrase\xF1a"),e(),l(21,"input",8),p(22,ee,2,0,"mat-error"),e(),t(23,"button",9),o(24," Iniciar Sesi\xF3n "),e()(),t(25,"p"),o(26,"\xBFNo tienes cuenta? "),t(27,"a",10),o(28,"Reg\xEDstrate aqu\xED"),e()()()()()),i&2&&(m(11),g("formGroup",a.loginForm),m(5),s(a.controlHasError("email","required")?16:-1),m(),s(a.controlHasError("email","email")?17:-1),m(5),s(a.controlHasError("password","required")?22:-1),m(),g("disabled",a.loginForm.invalid))},dependencies:[L,I,T,N,M,v,_,B,U,x,R,w,E,O,S,k,y,F],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Arial,sans-serif;background-color:#fff}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;padding:20px;box-sizing:border-box}.login-card[_ngcontent-%COMP%]{width:85%;max-width:1000px;display:flex;flex-direction:row;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #0000001a}.login-image[_ngcontent-%COMP%]{width:45%;background-color:#000;position:relative;display:flex;align-items:center;justify-content:center}.login-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.image-overlay-text[_ngcontent-%COMP%]{position:absolute;color:#fff;text-align:center;z-index:1}.image-overlay-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:5px}.image-overlay-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0}.login-image[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#00000080;z-index:0}.login-form[_ngcontent-%COMP%]{width:55%;padding:40px 30px;background-color:#fff}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1abc9c;font-weight:700;text-align:center;margin-bottom:20px;font-size:2rem}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.custom-input[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;padding:10px;width:100%;box-sizing:border-box;margin-bottom:15px}.custom-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1abc9c;box-shadow:0 0 5px #1abc9c80}.submit-button[_ngcontent-%COMP%]{background-color:#1abc9c!important;color:#fff!important;border:none;border-radius:8px;padding:12px;width:100%;font-weight:700;font-size:1.2rem;box-shadow:0 4px 10px #0003;transition:background-color .3s ease,box-shadow .3s ease}.submit-button[_ngcontent-%COMP%]:hover{background-color:#158467!important}p[_ngcontent-%COMP%]{color:#7f8c8d;text-align:center}a[_ngcontent-%COMP%]{color:#1abc9c;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}app-footer[_ngcontent-%COMP%]{background-color:#343a40;color:#fff;text-align:center;padding:10px;width:100%;position:fixed;bottom:0;left:0}@media (max-width: 992px){.login-card[_ngcontent-%COMP%]{flex-direction:column;width:90%;max-width:600px}.login-image[_ngcontent-%COMP%]{width:100%;height:200px}.login-form[_ngcontent-%COMP%]{width:100%;padding:20px}}']})};function te(r,n){r&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}function oe(r,n){r&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}function ne(r,n){r&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}function re(r,n){r&1&&(t(0,"mat-error"),o(1,"Introduzca un correo electr\xF3nico v\xE1lido"),e())}function ie(r,n){r&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}function ae(r,n){r&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}var q=class r{registerForm;fb=d(P);authService=d(C);router=d(b);snackBar=d(D);constructor(){this.registerForm=this.fb.group({firstName:["",c.required],lastName:["",c.required],email:["",[c.required,c.email]],password:["",c.required],shippingAddress:["",c.required]})}controlHasError(n,i){return this.registerForm.controls[n].hasError(i)}onSubmit(){if(this.registerForm.valid){let n=this.registerForm.value;this.authService.register(n).subscribe({next:i=>{this.showSnackBar("Registro exitoso"),this.router.navigate(["/auth/login"])},error:i=>{this.showSnackBar("Error en el registro"),console.error("Error en el registro:",i)}})}}showSnackBar(n){this.snackBar.open(n,"Cerrar",{duration:3e3})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=u({type:r,selectors:[["app-register"]],standalone:!0,features:[f],decls:44,vars:8,consts:[[1,"register-container"],[1,"register-card"],[1,"register-image"],[1,"register-overlay"],[1,"register-text"],[1,"register-description"],[1,"register-form"],[3,"ngSubmit","formGroup"],[1,"form-field"],["matInput","","formControlName","firstName","placeholder","Ingrese su nombre"],["matInput","","formControlName","lastName","placeholder","Ingrese su apellido"],["matInput","","formControlName","email","type","email","placeholder","Ingrese su correo electr\xF3nico"],["matInput","","formControlName","password","type","password","placeholder","Ingrese su contrase\xF1a"],["matInput","","formControlName","shippingAddress","placeholder","Ingrese su direcci\xF3n de env\xEDo"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],["routerLink","/auth/login"]],template:function(i,a){i&1&&(t(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),o(5,"Bienvenido a BookHub"),e(),t(6,"p",5),o(7," En BookHub, autores comparten sus obras y lectores descubren nuevas lecturas. \xDAnete a nuestra comunidad y comienza tu aventura literaria hoy."),e()()(),t(8,"div",6)(9,"h2"),o(10,"Crear Cuenta - Lector"),e(),t(11,"form",7),h("ngSubmit",function(){return a.onSubmit()}),t(12,"mat-form-field",8)(13,"mat-label"),o(14,"Nombre"),e(),l(15,"input",9),p(16,te,2,0,"mat-error"),e(),t(17,"mat-form-field",8)(18,"mat-label"),o(19,"Apellido"),e(),l(20,"input",10),p(21,oe,2,0,"mat-error"),e(),t(22,"mat-form-field",8)(23,"mat-label"),o(24,"Correo Electr\xF3nico"),e(),l(25,"input",11),p(26,ne,2,0,"mat-error")(27,re,2,0,"mat-error"),e(),t(28,"mat-form-field",8)(29,"mat-label"),o(30,"Contrase\xF1a"),e(),l(31,"input",12),p(32,ie,2,0,"mat-error"),e(),t(33,"mat-form-field",8)(34,"mat-label"),o(35,"Direcci\xF3n de Env\xEDo"),e(),l(36,"input",13),p(37,ae,2,0,"mat-error"),e(),t(38,"button",14),o(39," Registrarse "),e()(),t(40,"p"),o(41,"\xBFYa tienes cuenta? "),t(42,"a",15),o(43,"Inicia sesi\xF3n aqu\xED"),e()()()()()),i&2&&(m(11),g("formGroup",a.registerForm),m(5),s(a.controlHasError("firstName","required")?16:-1),m(5),s(a.controlHasError("lastName","required")?21:-1),m(5),s(a.controlHasError("email","required")?26:-1),m(),s(a.controlHasError("email","email")?27:-1),m(5),s(a.controlHasError("password","required")?32:-1),m(5),s(a.controlHasError("shippingAddress","required")?37:-1),m(),g("disabled",a.registerForm.invalid))},dependencies:[L,I,T,N,M,v,_,B,x,R,w,E,O,S,k,y,F,U],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Arial,sans-serif;background-color:#f4f4f4;overflow:hidden}.register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh}.register-card[_ngcontent-%COMP%]{width:85%;max-width:1000px;display:flex;flex-direction:row;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #0000001a;margin-bottom:20px}.register-image[_ngcontent-%COMP%]{width:45%;background-color:#000;position:relative;display:flex;align-items:center;justify-content:center}.register-overlay[_ngcontent-%COMP%]{position:absolute;color:#fff;text-align:center;padding:20px;background-color:#0009;border-radius:8px}.register-text[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:10px}.register-description[_ngcontent-%COMP%]{font-size:1rem;font-weight:300}.register-form[_ngcontent-%COMP%]{width:55%;padding:40px 30px;background-color:#fff}.register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1abc9c;font-weight:700;text-align:center;margin-bottom:20px;font-size:2rem}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.custom-input[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;padding:10px;width:100%;box-sizing:border-box;margin-bottom:15px}.custom-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1abc9c;box-shadow:0 0 5px #1abc9c80}.submit-button[_ngcontent-%COMP%]{background-color:#1abc9c!important;color:#fff!important;border:none;border-radius:8px;padding:12px;width:100%;font-weight:700;font-size:1.2rem;box-shadow:0 4px 10px #0003;transition:background-color .3s ease,box-shadow .3s ease}.submit-button[_ngcontent-%COMP%]:hover{background-color:#158467!important;box-shadow:0 6px 12px #0000004d}p[_ngcontent-%COMP%]{color:#7f8c8d;text-align:center}a[_ngcontent-%COMP%]{color:#1abc9c;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}app-footer[_ngcontent-%COMP%]{background-color:#343a40;color:#fff;text-align:center;padding:10px;width:100%;position:fixed;bottom:0;left:0}@media (max-width: 992px){.register-card[_ngcontent-%COMP%]{flex-direction:column;width:90%;max-width:600px}.register-image[_ngcontent-%COMP%]{width:100%;height:250px}.register-form[_ngcontent-%COMP%]{width:100%;padding:20px}}"]})};var De=[{path:"",component:A,children:[{path:"login",component:H},{path:"register",component:q}]}];export{De as authRoutes};
